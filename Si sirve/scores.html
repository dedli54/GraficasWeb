<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>puntuaciones</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="menuPage">
<div class="menu">
<div id="puntuaciones">
  <h2 id="tablaP">Tabla de Puntuaciones</h2>
  <table id="tablaNombres">
    <tr id="impar">
      <th>Nombre</th>
      <th id="pun">Puntuaciones</th>
    </tr>
  </table>
  <button id="buttonHome" onclick="backToMenuScore()">Volver al Menú</button>
</div>
  
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
    import { getDatabase, ref, onValue, set, remove } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB6ZBUO4LTlgALjArU3EVAS2QPNYP9HKdg",
      authDomain: "graficasweb-65529.firebaseapp.com",
      databaseURL: "https://graficasweb-65529-default-rtdb.firebaseio.com",
      projectId: "graficasweb-65529",
      storageBucket: "graficasweb-65529.appspot.com",
      messagingSenderId: "758709726020",
      appId: "1:758709726020:web:e69aa24c91f26bad23c511"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();

    function fetchScores() {
        const scoresRef = ref(db, 'users');
        onValue(scoresRef, (snapshot) => {
          const data = snapshot.val();
          updateScoresTable(data);
        });
    }

    function updateScoresTable(data) {
        const table = document.getElementById('tablaNombres');
        // Limpia las filas existentes excepto la cabecera
        table.innerHTML = `
          <tr id="impar">
            <th>Nombre</th>
            <th id="pun">Puntuaciones</th>
          </tr>
        `;
      
        // Agrega las nuevas filas de datos
        let isOdd = true;
        for (let userId in data) {
          const user = data[userId];
          const row = document.createElement('tr');
          row.id = isOdd ? 'impar' : 'par';
          isOdd = !isOdd;
      
          const nameCell = document.createElement('td');
          nameCell.textContent = user.email;
          row.appendChild(nameCell);
      
          const scoreCell = document.createElement('td');
          scoreCell.id = 'pun';
          scoreCell.textContent = user.score;
          row.appendChild(scoreCell);
      
          table.appendChild(row);
        }
    }

    // Llamar a fetchScores al cargar la página
    window.onload = fetchScores;
</script>
<script src="script.js"></script>

</body>
</html>

